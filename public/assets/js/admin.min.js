!function(e){"use strict";var a=function(a){var t=!1;return e(a).each(function(){if(e(this).is(":checked"))return void(t=!0)}),t};e(document).ready(function(){e("th i.fa-sort").on("click",function(){e('#sort-form input[name="sortBy"]').val(e(this).attr("id")),""==e('#sort-form input[name="sortDir"]').val()||"asc"==e('#sort-form input[name="sortDir"]').val()?e('#sort-form input[name="sortDir"]').val("desc"):e('#sort-form input[name="sortDir"]').val("asc"),console.log(e('#sort-form input[name="sortDir"]').val()),e("#sort-form").submit()}),jQuery.validator.setDefaults({highlight:function(a,t,i){"radio"===a.type?this.findByName(a.name).addClass(t).removeClass(i):(e(a).removeClass("form-admin-input").addClass("form-control"),e(a).closest(".form-group").removeClass("has-success has-feedback").addClass("has-error has-feedback"))},unhighlight:function(a,t,i){"radio"===a.type?this.findByName(a.name).removeClass(t).addClass(i):(e(a).removeClass("form-admin-input").addClass("form-control"),e(a).closest(".form-group").removeClass("has-error has-feedback").addClass("has-success has-feedback"))}}),e.extend(e.validator.messages,{required:"Ce champ est obligatoire.",email:"Veuillez saisir une adresse mail valide.",url:"Veuillez saisir une URL valide.",creditcard:"Veuillez saisir un numéro de carte de crédit valide.",date:"Veuillez saisir une date valide.",datetime:"Veuillez saisir une date/heure valide.(aaaa-mm-jjThh:mm:ssZ)","datetime-local":"Veuillez saisir une date/heure locale valide.(aaaa-mm-jjThh:mm:ss)",time:"Veuillez saisir une heure valide.",alphabetic:"Veuillez ne saisir que des lettres.",alphanumeric:"Veuillez ne saisir que des lettres, souligné et chiffres.",color:"Veuillez saisir une couleur valide. (nommée, hexadecimale ou rvb)",month:"Veuillez saisir une année et un mois. (ex.: 1974-03)",week:"Veuillez saisir une année et une semaine. (ex.: 1974-W43)",number:"Veuillez saisir un nombre.(ex.: 12,-12.5,-1.3e-2)",integer:"Veuillez saisir un nombre sans decimales.",zipcode:"Veuillez saisir un code postal valide.",minlength:"Veuillez saisir au moins {0} caractères.",maxlength:"Veuillez ne pas saisir plus de {0} caractères.",min:"Veuillez saisir une valeur supérieure ou égale à {0}.",max:"Veuillez saisir une valeur inférieure ou égale à {0}.",mustmatch:"Veuillez resaisir la même valeur.",captcha:"Votre réponse ne correspond pas au texte de l'image. Réesayez.",personnummer:"Veuillez saisir un personnummer valide. (aaaammjj-aaaa)",organisationsnummer:"Veuillez saisir un organisationsnummer valide. (xxyyzz-aaaa)",ipv4:"Veuillez saisir une adresse IP valide (version 4).",ipv6:"Veuillez saisir une adresse IP valide (version 6).",tel:"Veuillez saisir un numéro de téléphone valide.",remote:"Veuillez vérifier ce champ."}),e.validator.addMethod("filesize",function(e,a,t){return this.optional(a)||a.files[0].size<=t},"La taille de l'image doit être inférieure à 150 Ko"),e.inArray(window.location.pathname,["/admin/post","/admin/question","/admin/eleve","/comment"])>-1&&(e("#massupdateBtn").on("click",function(t){t.preventDefault(),a('input[name="ids[]"]')&&0!=e('select[name="massupdate"]').val()?"delete"==e('select[name="massupdate"]').val()?e("#deleteManyModal").modal("show"):e("#massupdate-form").submit():alert("Veuillez renseigner le filtre et cocher au moins un élément pour effectuer cette action")}),e("#deleteManyBtn").on("click",function(){e("#massupdate-form").submit()}),e('input[name="checkall"]').change(function(){return e(this).is(":checked")?(e('input[name="ids[]"]').prop("checked",!0),void e('input[name="ids[]"]').each(function(){e(this).attr("checked",!0)})):void e('input[name="ids[]"]').each(function(){e(this).attr("checked",!1)})}),e("#deletePost").on("show.bs.modal",function(a){console.log("DELETING "+e(a.relatedTarget).attr("data-id")),e("#deleteForm").attr("action","/admin/post/"+e(a.relatedTarget).attr("data-id"))})),("/admin/post/create"==window.location.pathname||window.location.pathname.indexOf("/admin/post/")!==-1&&window.location.pathname.indexOf("edit")!==-1)&&(e.validator.messages.required=function(e,a){return"Le champ "+a.name+"  est obligatoire"},CKEDITOR.replace("content",{}),e(".tweet_form").hide(),e('input[name="tweet"]').on("change",function(){e(this).is(":checked")?e(".tweet_form").slideDown():e(".tweet_form").slideUp()}),e("#post-form").validate({rules:{title:{required:!0,maxlength:100},status:{required:!0},excerpt:{minlength:20,maxlength:255},picture:{accept:"image/*",filesize:153600},tweet_content:{minlength:10,maxlength:100}},messages:{picture:{accept:"Seules les images sont autorisées"}}}),e("#postSubmit").on("click",function(a){a.preventDefault;var t=!0,i=!0,n=CKEDITOR.instances.content.getData();(n.length<20||""==n)&&(t=!1),"on"==e('#post-form input[name="tweet"]').val()&&e('#post-form textarea[name="tweet_content"]').val().length>100&&(i=!1),e("#post-form").valid()&&t&&i?(e("#labelcontenu").hasClass("error")&&(e("#labelcontenu").removeClass("error"),e("#contentError").fadeOut()),e("#labeltweetcontent").hasClass("error")&&(e("#labeltweetcontent").removeClass("error"),e("#tweetError").fadeOut()),e("#post-form").submit()):(t||(e("#labelcontenu").addClass("error"),e("#contentError").fadeIn()),i||(e("#labeltweetcontent").addClass("error"),e("#tweetError").fadeIn()))})),e("#deleteQuestion").on("show.bs.modal",function(a){e("#deleteForm").attr("action","/admin/question/"+e(a.relatedTarget).attr("data-id"))}),e("#deleteQuestionBtn").on("click",function(a){a.preventDefault(),e("#deleteForm").submit()}),e("#deletePost").on("show.bs.modal",function(a){e("#deleteForm").attr("action","/admin/post/"+e(a.relatedTarget).attr("data-id"))}),e("#deletePostBtn").on("click",function(a){a.preventDefault(),e("#deleteForm").submit()}),e("#deleteEleve").on("show.bs.modal",function(a){e("#deleteForm").attr("action","/admin/eleve/"+e(a.relatedTarget).attr("data-id"))}),e("#deleteEleveBtn").on("click",function(a){a.preventDefault(),e("#deleteForm").submit()})})}(jQuery);